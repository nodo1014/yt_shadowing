<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>영어 쉐도잉 시스템</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="app-header">
        <div class="container">
            <h1 class="logo">영어 쉐도잉 시스템</h1>
            <nav class="main-nav">
                <ul>
                    <li><a href="#" class="nav-link active" data-page="home">홈</a></li>
                    <li><a href="#" class="nav-link" data-page="extract">영상 추출</a></li>
                    <li><a href="#" class="nav-link" data-page="subtitle">자막 처리</a></li>
                    <li><a href="#" class="nav-link" data-page="repeat">반복 영상</a></li>
                    <li><a href="#" class="nav-link" data-page="pronunciation">발음 연습</a></li>
                    <li><a href="#" class="nav-link" data-page="thumbnail">썸네일</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="app-main">
        <div class="container">
            <!-- 홈 페이지 -->
            <div class="page active" id="home-page">
                <h2>영어 쉐도잉 시스템에 오신 것을 환영합니다</h2>
                <div class="features">
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-video"></i></div>
                        <h3>영상 추출</h3>
                        <p>YouTube 영상 또는 로컬 비디오에서 원하는 부분만 추출합니다.</p>
                        <a href="#" class="btn btn-primary" data-page="extract">시작하기</a>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-closed-captioning"></i></div>
                        <h3>자막 처리</h3>
                        <p>영상의 자막을 추출하고 한국어 번역을 생성합니다.</p>
                        <a href="#" class="btn btn-primary" data-page="subtitle">시작하기</a>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-sync-alt"></i></div>
                        <h3>반복 영상 생성</h3>
                        <p>쉐도잉 학습에 최적화된 반복 영상을 생성합니다.</p>
                        <a href="#" class="btn btn-primary" data-page="repeat">시작하기</a>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-image"></i></div>
                        <h3>썸네일 생성</h3>
                        <p>학습 내용을 담은 썸네일을 자동으로 생성합니다.</p>
                        <a href="#" class="btn btn-primary" data-page="thumbnail">시작하기</a>
                    </div>
                </div>
            </div>

            <!-- 영상 추출 페이지 -->
            <div class="page" id="extract-page">
                <h2>영상 추출</h2>
                
                <div class="panel">
                    <h3>YouTube 영상 다운로드</h3>
                    <form id="youtube-form" class="form">
                        <div class="form-group">
                            <label for="youtube-url">YouTube URL:</label>
                            <input type="text" id="youtube-url" name="url" placeholder="https://www.youtube.com/watch?v=..." required>
                        </div>
                        <div class="form-group">
                            <label for="youtube-quality">품질 선택:</label>
                            <select id="youtube-quality" name="quality">
                                <option value="best">최고 품질</option>
                                <option value="medium">중간 품질</option>
                                <option value="low">낮은 품질</option>
                            </select>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" id="youtube-audio-only" name="audio_only">
                            <label for="youtube-audio-only">오디오만 추출</label>
                        </div>
                        <button type="submit" class="btn btn-primary">다운로드</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>비디오 클립 추출</h3>
                    <form id="clip-form" class="form">
                        <div class="form-group">
                            <label for="clip-input">입력 영상:</label>
                            <select id="clip-input" name="input_path" required></select>
                        </div>
                        <div class="form-group form-row">
                            <div class="form-col">
                                <label for="clip-start">시작 시간:</label>
                                <input type="text" id="clip-start" name="start_time" placeholder="00:01:30" required>
                            </div>
                            <div class="form-col">
                                <label for="clip-end">종료 시간:</label>
                                <input type="text" id="clip-end" name="end_time" placeholder="00:02:45" required>
                            </div>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" id="clip-audio-only" name="audio_only">
                            <label for="clip-audio-only">오디오만 추출</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" id="clip-high-quality" name="high_quality">
                            <label for="clip-high-quality">고품질 인코딩</label>
                        </div>
                        <button type="submit" class="btn btn-primary">클립 추출</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>클립 목록</h3>
                    <div class="media-list" id="clips-list">
                        <div class="loading">클립 목록을 불러오는 중...</div>
                    </div>
                </div>
            </div>

            <!-- 자막 처리 페이지 -->
            <div class="page" id="subtitle-page">
                <h2>자막 처리</h2>
                
                <div class="panel">
                    <h3>자막 추출</h3>
                    <form id="extract-subtitle-form" class="form">
                        <div class="form-group">
                            <label for="subtitle-video">비디오 선택:</label>
                            <select id="subtitle-video" name="video_path" required></select>
                        </div>
                        <button type="submit" class="btn btn-primary">자막 추출</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>자막 번역</h3>
                    <form id="translate-subtitle-form" class="form">
                        <div class="form-group">
                            <label for="subtitle-file">자막 파일:</label>
                            <select id="subtitle-file" name="subtitle_path" required></select>
                        </div>
                        <button type="submit" class="btn btn-primary">번역 생성</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>자막 업로드</h3>
                    <form id="upload-subtitle-form" class="form">
                        <div class="form-group">
                            <label for="subtitle-upload">자막 파일:</label>
                            <input type="file" id="subtitle-upload" name="file" accept=".srt,.vtt,.ass" required>
                        </div>
                        <div class="form-group">
                            <label for="subtitle-video-id">비디오 ID:</label>
                            <input type="text" id="subtitle-video-id" name="video_id" placeholder="비디오 파일명 또는 식별자" required>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" id="subtitle-auto-index" name="auto_index" checked>
                            <label for="subtitle-auto-index">자동 인덱싱</label>
                        </div>
                        <button type="submit" class="btn btn-primary">업로드</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>자막 검색</h3>
                    <form id="search-subtitle-form" class="form">
                        <div class="form-group">
                            <label for="subtitle-query">검색어:</label>
                            <input type="text" id="subtitle-query" name="query" placeholder="검색할 단어나 문장" required>
                        </div>
                        <div class="form-group">
                            <label for="subtitle-limit">결과 수:</label>
                            <input type="number" id="subtitle-limit" name="limit" min="1" max="100" value="10">
                        </div>
                        <button type="submit" class="btn btn-primary">검색</button>
                    </form>
                    <div id="subtitle-search-results" class="search-results"></div>
                </div>
            </div>

            <!-- 반복 영상 페이지 -->
            <div class="page" id="repeat-page">
                <h2>반복 영상 생성</h2>
                
                <div class="panel">
                    <h3>반복 영상 생성</h3>
                    <form id="repeat-form" class="form">
                        <div class="form-group">
                            <label for="repeat-input-video">입력 영상:</label>
                            <select id="repeat-input-video" name="input_video" required></select>
                        </div>
                        <div class="form-group">
                            <label for="repeat-subtitle-file">자막 파일:</label>
                            <select id="repeat-subtitle-file" name="subtitle_file" required></select>
                        </div>
                        <div class="form-group">
                            <label for="repeat-translation">번역 파일 (선택사항):</label>
                            <select id="repeat-translation" name="translation_path"></select>
                        </div>
                        <button type="submit" class="btn btn-primary">반복 영상 생성</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>생성된 반복 영상</h3>
                    <div class="media-list" id="outputs-list">
                        <div class="loading">영상 목록을 불러오는 중...</div>
                    </div>
                </div>
            </div>

            <!-- 썸네일 페이지 -->
            <div class="page" id="thumbnail-page">
                <h2>썸네일 생성</h2>
                
                <div class="panel">
                    <h3>썸네일 생성</h3>
                    <form id="thumbnail-form" class="form">
                        <div class="form-group">
                            <label for="thumbnail-main-text">메인 텍스트:</label>
                            <input type="text" id="thumbnail-main-text" name="main_text" placeholder="메인 제목" required>
                        </div>
                        <div class="form-group">
                            <label for="thumbnail-subtitle">부제목 (선택사항):</label>
                            <input type="text" id="thumbnail-subtitle" name="subtitle_text" placeholder="부제목">
                        </div>
                        <div class="form-group">
                            <label for="thumbnail-background">배경 이미지 (선택사항):</label>
                            <select id="thumbnail-background" name="background_image"></select>
                        </div>
                        <button type="submit" class="btn btn-primary">썸네일 생성</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>템플릿 적용</h3>
                    <form id="template-form" class="form">
                        <div class="form-group">
                            <label for="template-name">템플릿:</label>
                            <select id="template-name" name="template_name" required></select>
                        </div>
                        <div class="form-group">
                            <label for="template-main-text">메인 텍스트:</label>
                            <input type="text" id="template-main-text" name="main_text" placeholder="메인 제목" required>
                        </div>
                        <div class="form-group">
                            <label for="template-subtitle">부제목 (선택사항):</label>
                            <input type="text" id="template-subtitle" name="subtitle_text" placeholder="부제목">
                        </div>
                        <button type="submit" class="btn btn-primary">템플릿 적용</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>배경 이미지 업로드</h3>
                    <form id="background-upload-form" class="form">
                        <div class="form-group">
                            <label for="background-file">이미지 파일:</label>
                            <input type="file" id="background-file" name="file" accept=".jpg,.jpeg,.png,.webp" required>
                        </div>
                        <div class="form-group">
                            <label for="background-name">이름 (선택사항):</label>
                            <input type="text" id="background-name" name="name" placeholder="배경 이미지 이름">
                        </div>
                        <button type="submit" class="btn btn-primary">업로드</button>
                    </form>
                </div>
                
                <div class="panel">
                    <h3>생성된 썸네일</h3>
                    <div class="media-list" id="thumbnails-list">
                        <div class="loading">썸네일 목록을 불러오는 중...</div>
                    </div>
                </div>
            </div>

            <!-- 발음 연습 페이지 -->
            <div class="page" id="pronunciation-page">
                <h2>발음 연습</h2>
                
                <div class="panel">
                    <h3>샘플 문장 선택</h3>
                    <form id="pronunciation-select-form" class="form">
                        <div class="form-group">
                            <label for="pronunciation-clip">클립 선택:</label>
                            <select id="pronunciation-clip" name="clip_path" required></select>
                        </div>
                        <div class="form-group">
                            <label for="pronunciation-subtitle">자막 선택:</label>
                            <select id="pronunciation-subtitle" name="subtitle_path" required></select>
                        </div>
                        <button type="submit" class="btn btn-primary">샘플 불러오기</button>
                    </form>
                </div>
                
                <div class="panel" id="pronunciation-practice-panel" style="display: none;">
                    <h3>발음 연습</h3>
                    <div class="practice-container">
                        <div class="video-container">
                            <video id="pronunciation-video" controls></video>
                        </div>
                        <div class="subtitle-container">
                            <div class="subtitle-text" id="current-subtitle">
                                <p class="subtitle-original"></p>
                                <p class="subtitle-translation"></p>
                            </div>
                        </div>
                        <div class="controls-container">
                            <button id="play-original" class="btn">
                                <i class="fas fa-volume-up"></i> 원래 발음 듣기
                            </button>
                            <button id="record-pronunciation" class="btn btn-primary">
                                <i class="fas fa-microphone"></i> 내 발음 녹음
                            </button>
                            <button id="stop-recording" class="btn btn-danger" style="display: none;">
                                <i class="fas fa-stop"></i> 녹음 중지
                            </button>
                            <button id="play-recorded" class="btn" disabled>
                                <i class="fas fa-play"></i> 내 발음 듣기
                            </button>
                            <button id="compare-pronunciation" class="btn" disabled>
                                <i class="fas fa-chart-bar"></i> 발음 비교
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="panel pronunciation-result-panel" id="pronunciation-result-panel" style="display: none;">
                    <h3>발음 평가 결과</h3>
                    <div class="result-container">
                        <div class="score-container">
                            <div class="score-circle">
                                <span id="pronunciation-score">0</span>
                            </div>
                            <p>발음 점수</p>
                        </div>
                        <div class="feedback-container">
                            <h4>피드백</h4>
                            <div id="pronunciation-feedback"></div>
                        </div>
                        <div class="waveform-container">
                            <div class="waveform-comparison">
                                <div class="waveform-original">
                                    <h4>원본 오디오</h4>
                                    <div id="waveform-original"></div>
                                </div>
                                <div class="waveform-recorded">
                                    <h4>내 오디오</h4>
                                    <div id="waveform-recorded"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="panel">
                    <h3>발음 연습 기록</h3>
                    <div class="history-list" id="pronunciation-history">
                        <div class="loading">기록을 불러오는 중...</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="app-footer">
        <div class="container">
            <p>&copy; 2025 영어 쉐도잉 시스템</p>
        </div>
    </footer>

    <!-- 알림 모달 -->
    <div class="modal" id="notification-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-body">
                <div class="modal-icon"></div>
                <div class="modal-message"></div>
            </div>
        </div>
    </div>

    <!-- 작업 상태 모달 -->
    <div class="modal" id="task-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <h3 class="modal-title">작업 진행 중...</h3>
            </div>
            <div class="modal-body">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p class="task-status">작업이 진행중입니다. 잠시만 기다려주세요...</p>
            </div>
        </div>
    </div>

    <!-- 미디어 뷰어 모달 -->
    <div class="modal" id="media-modal">
        <div class="modal-content modal-large">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <h3 class="modal-title"></h3>
            </div>
            <div class="modal-body">
                <div class="media-viewer"></div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>